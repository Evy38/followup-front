<div class="profile-wrapper" *ngIf="user">

  <h1 class="page-title">Mon Profil</h1>

  <div class="profile-card">

    <!-- Informations personnelles -->
    <div class="section">
      <h2>Informations personnelles</h2>

      <div class="form-group">
        <label>Email</label>
        <input type="email" [(ngModel)]="email" name="email" required />
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Prénom</label>
          <input type="text" [(ngModel)]="firstName" name="firstName" />
        </div>

        <div class="form-group">
          <label>Nom</label>
          <input type="text" [(ngModel)]="lastName" name="lastName" />
        </div>
      </div>
    </div>

    <!-- Séparation -->
    <div class="divider"></div>

    <!-- Mot de passe -->
    <div class="section">
      <h2>Sécurité</h2>

      <div class="form-group">
        <label>Mot de passe actuel</label>
        <input type="password" [(ngModel)]="currentPassword" name="currentPassword" />
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Nouveau mot de passe</label>
          <input type="password" [(ngModel)]="newPassword" name="newPassword" />
        </div>

        <div class="form-group">
          <label>Confirmer</label>
          <input type="password" [(ngModel)]="confirmPassword" name="confirmPassword" />
        </div>
      </div>
    </div>

    <div class="actions">
      <button type="submit" (click)="updateProfile()" [disabled]="loading">
        Enregistrer les modifications
      </button>
    </div>

    <!-- Séparation -->
    <div class="divider"></div>

    <!-- Zone dangereuse -->
    <div class="section danger-zone">
      <h2>Zone dangereuse</h2>
      <p class="danger-description">
        Une fois votre compte supprimé, il n'y a pas de retour en arrière. 
        Veuillez en être certain.
      </p>
      <button type="button" class="btn-danger" (click)="openDeleteModal()">
        Supprimer mon compte
      </button>
    </div>

  </div>

  <!-- Modal de confirmation -->
  <app-confirm-modal
    [open]="showDeleteModal"
    [title]="'Supprimer votre compte ?'"
    [message]="'Cette action est irréversible. Toutes vos données seront définitivement supprimées. Êtes-vous absolument certain de vouloir continuer ?'"
    [confirmText]="'Oui, supprimer mon compte'"
    [cancelText]="'Annuler'"
    [danger]="true"
    [loading]="deletingAccount"
    (confirm)="confirmDeleteAccount()"
    (cancel)="closeDeleteModal()">
  </app-confirm-modal>
</div>