<section class="annonces" (scroll)="onScroll($event)">
  <p *ngIf="loading" class="state">Chargement des annoncesâ€¦</p>
  <p *ngIf="error" class="state error">{{ error }}</p>

  <div *ngIf="!loading && !error && jobs.length === 0" class="no-results">
    <p>Aucune annonce ne correspond Ã  vos critÃ¨res de recherche.</p>
    <p class="hint">Essayez de modifier vos filtres ou d'Ã©largir votre recherche.</p>
  </div>

  <p *ngIf="!loading && !error && jobs.length > 0" class="results-count">
    {{ jobs.length }} annonce(s) trouvÃ©e(s)
  </p>

  <ul *ngIf="!loading && !error" class="job-list">
    <li *ngFor="let job of jobs; trackBy: trackByJobId" class="job-card">

      <header class="job-header">
        <h3 class="job-title">{{ job.title }}</h3>

        <span
          *ngIf="job.contractType && job.contractType !== 'Non spÃ©cifiÃ©'"
          class="contract-badge"
          [class.badge-cdi]="job.contractType === 'CDI'"
          [class.badge-cdd]="job.contractType === 'CDD'"
          [class.badge-interim]="job.contractType === 'IntÃ©rim'"
        >
          {{ job.contractType }}
        </span>
      </header>

      <p class="company"><strong>{{ job.company }}</strong></p>
      <p class="location">{{ job.location }}</p>

      <p *ngIf="job.salaryMin || job.salaryMax" class="salary">
        ðŸ’° Salaire :
        {{ job.salaryMin ?? 'â€”' }} â‚¬ â€“ {{ job.salaryMax ?? 'â€”' }} â‚¬
      </p>

      <div class="job-actions">
        <a
          [href]="job.redirectUrl"
          target="_blank"
          rel="noopener noreferrer"
          class="link"
        >
          Voir l'annonce
        </a>

        <button
          (click)="onCandidated(job)"
          [disabled]="job._candidated"
        >
          {{ job._candidated ? 'DÃ©jÃ  candidatÃ©' : 'Jâ€™ai candidatÃ©' }}
        </button>
      </div>
    </li>
  </ul>

  <!-- Indicateur de chargement de la page suivante -->
  <div *ngIf="loadingMore" class="loading-more">
    <p class="state">Chargement d'autres annoncesâ€¦</p>
  </div>

  <!-- Message de fin de pagination -->
  <div *ngIf="!loading && !loadingMore && jobs.length > 0 && !hasMore" class="end-of-list">
    <p class="hint">Vous avez atteint la fin des rÃ©sultats</p>
  </div>
</section>
