<ul class="candidature-list" *ngIf="candidatures.length; else emptyState">
  <li *ngFor="let c of candidatures" class="candidature-card">
    <div class="card-main">
      <div class="top-row">
        <div class="title-block">
          <h3 class="job-title">{{ c.jobTitle }}</h3>
          <p class="company">{{ c.entreprise.nom }}</p>
        </div>
      </div>

      <div class="meta-row">
        <span class="timeline">Jâ€™ai candidatÃ© le {{ formatDate(c.dateCandidature) }}</span>
      </div>

      <a *ngIf="c.lienAnnonce" class="link" [href]="c.lienAnnonce" target="_blank" rel="noopener noreferrer">
        Voir lâ€™annonce
      </a>
    </div>

    <div class="card-action">
      <button type="button" class="delete-btn" (click)="askDelete(c)">
        ğŸ—‘ï¸ <span>supprimer</span>
      </button>
    </div>
  </li>
</ul>

<ng-template #emptyState>
  <div class="empty">Aucune candidature pour le moment.</div>
</ng-template>

<!-- âœ… MODALE CONFIRMATION -->
<div class="modal-overlay" *ngIf="confirmOpen" (click)="cancelDelete()">
  <div class="modal-card" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <div class="modal-icon">ğŸ—‘ï¸</div>
      <h3 class="modal-title">Supprimer la candidature ?</h3>
    </div>

    <p class="modal-text">
      Tu es sur le point de supprimer la candidature pour
      <strong>{{ pendingDelete?.entreprise?.nom || 'cette entreprise' }}</strong>.
      Cette action est irrÃ©versible.
    </p>

    <div class="modal-actions">
      <button type="button" class="btn-secondary" (click)="cancelDelete()" [disabled]="deleting">
        Non
      </button>

      <button type="button" class="btn-danger" (click)="confirmDelete()" [disabled]="deleting">
        {{ deleting ? 'Suppressionâ€¦' : 'Oui, supprimer' }}
      </button>
    </div>
  </div>
</div>